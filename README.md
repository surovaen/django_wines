# Бэкенд с JWT-аутентификацией

Реализация доступа к информации о винах и маркетах, с аутетификацией на основе access и refresh токенов jwt.

Эндпойнты:
1. Регистрация пользователя по логину и паролю. В ответ пользователь получает пару access_token/refresh_token. Access_token используется для аутентификации пользователя типа ApiKey в хэдере "Authorization"
2. Вход пользователя по логину и паролю. В ответ пользователь получает пару access_token/refresh_token. Access_token используется для аутентификации пользователя типа ApiKey в хэдере "Authorization"
3. Обмен refresh_token на новую пару access_token/refresh_token по истечении срока действия access_token. По истечении срока действия refresh_token пользователю необходимо залогиниться заново.
4. Получение информации о винах и маркетах, где они находятся в наличии. Доступны:
- полнотекстовый поиск по наименованию и описанию вина;
- поиск по точной дате разлива;
- поиск по вхождению даты в указанный период;
- указание страницы и лимита выборки.


## Используемые технологии
Бэкенд: python3.10, django, gunicorn, django-filter, PyJWT

API: django rest framework, drf-yasg

СУБД: PostgreSQL + расширение TrigramExtension

Линтеры: isort, flake8

## Настройка проекта

Проект настраивается через переменные окружения, указанные в файле src/.env

Пример .env файла указан в .env.example:

| Ключ                | Значение                           | По умолчанию          |
|---------------------|------------------------------------|-----------------------|
| `SECRET_KEY`        | Секретный ключ                     | `the-most-secret-key` |
| `DEBUG`             | Режим дебага                       | `True`                |
| `POSTGRES_DB`       | Имя БД                             | `wines`               |
| `POSTGRES_USER`     | Пользователь БД                    | `postgres`            |
| `POSTGRES_PASSWORD` | Пароль пользователя БД             | `postgres`            |
| `POSTGRES_HOST`     | Адрес СУБД                         | `db`                  |
| `POSTGRES_PORT`     | Порт СУБД                          | `5432`                |
| `STATIC_PATH`       | Путь до статических файлов         | `/project/static`     |
| `APP_PROXY_PORT`    | Порт контейнера с бэкендом         | `8000`                |
| `APP_PROXY_LINK`    | Наименование контейнера с бэкендом | `app`                 |
| `JWT_PRIVATE_KEY`   | Private RSA Key                    |                       |
| `JWT_PUBLIC_KEY`    | Public RSA Key                     |                       |


## Запуск проекта:

В корне проекта запустить команду:

`docker-compose -f docker-compose.yml up --build -d`

Доступ по адресу: `127.0.0.1:8000`

Сваггер: `127.0.0.1:8000/api/v1/swagger`

Админ-панель: `127.0.0.1:8000/admin`

Для создания администратора в контейнере "app" необходимо запустить команду:

`python manage.py createsuperuser`